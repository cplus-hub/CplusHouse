<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ .Title }} | {{ .Site.Title }}</title>
    <link rel="stylesheet" href="{{ "css/style.css" | relURL }}">
</head>
<body>
    <header>
        <nav>
            <a href="{{ "" | relURL }}" class="logo">{{ .Site.Title }}</a>
            <div class="nav-right">
                <a href="{{ "blog" | relURL }}" class="nav-link">ÈÉ®ËêΩÊ†º</a>
                <button id="theme-toggle" aria-label="ÂàáÊèõ‰∏ªÈ°å">üåô</button>
            </div>
        </nav>
    </header>

    <main>
        {{ block "main" . }}{{ end }}
    </main>

    <footer>
        <p>&copy; {{ now.Year }} {{ .Site.Params.author }}. Powered by Hugo.</p>
    </footer>

    <!-- ÂõûÂà∞È†ÇÈÉ®ÊåâÈàï -->
    <button id="back-to-top" aria-label="ÂõûÂà∞È†ÇÈÉ®">‚Üë</button>

    <script>
        // ÊöóÈªëÊ®°ÂºèÂàáÊèõÈÇèËºØ
        const toggleBtn = document.getElementById('theme-toggle');
        const body = document.body;
        
        // Ê™¢Êü•Êú¨Âú∞ÂÑ≤Â≠òÊàñÁ≥ªÁµ±ÂÅèÂ•Ω
        const currentTheme = localStorage.getItem('theme');
        if (currentTheme === 'dark' || (!currentTheme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            body.classList.add('dark-mode');
            toggleBtn.textContent = '‚òÄÔ∏è';
        }

        toggleBtn.addEventListener('click', () => {
            body.classList.toggle('dark-mode');
            const isDark = body.classList.contains('dark-mode');
            toggleBtn.textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
        });

        // ÂõûÂà∞È†ÇÈÉ®ÊåâÈàïÈÇèËºØ
        const backToTopBtn = document.getElementById('back-to-top');

        // Áõ£ËÅΩÊç≤Âãï‰∫ã‰ª∂
        window.addEventListener('scroll', () => {
            // Áï∂Êç≤ÂãïË∂ÖÈÅé 300px ÊôÇÈ°ØÁ§∫ÊåâÈàï
            if (window.scrollY > 300) {
                backToTopBtn.classList.add('show');
            } else {
                backToTopBtn.classList.remove('show');
            }
        });

        // ÈªûÊìäÂõûÂà∞È†ÇÈÉ®
        backToTopBtn.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
    </script>
</body>
</html>